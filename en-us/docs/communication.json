{
  "filename": "communication.md",
  "__html": "<h1>通讯指令手册</h1>\n<p>TxClient 与 TxManager 通讯指令说明文档</p>\n<p>通讯指令数据包格式为Json格式</p>\n<p>Json结构说明:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>key</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">请求唯一标示</td>\n</tr>\n<tr>\n<td>remoteKey</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">请求资源方标示key</td>\n</tr>\n<tr>\n<td>msg</td>\n<td style=\"text-align:center\">object</td>\n<td style=\"text-align:center\">请求包数据体</td>\n</tr>\n<tr>\n<td>msg.action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">请求业务方法名</td>\n</tr>\n<tr>\n<td>msg.state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">请求状态 100:发起请求,200:响应成功,500:响应失败</td>\n</tr>\n<tr>\n<td>msg.groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n<tr>\n<td>msg.bytes</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">序列化请求数据</td>\n</tr>\n</tbody>\n</table>\n<p>示例数据包:</p>\n<p>请求包</p>\n<pre><code>{\n\t&quot;key&quot;: &quot;25303248287617950&quot;,\n\t&quot;msg&quot;: {\n\t\t&quot;action&quot;: &quot;joinGroup&quot;,\n\t\t&quot;state&quot;: 100,\n\t\t&quot;bytes&quot;: &quot;ChEyNTMwMzIyNDYxMjczODg4OBIgNGQ1NTcwMjc3Yzg1OTI5OTI5YWUxNDBiNjFlNjA3ZjAaA3R4Yw==&quot;,\n\t\t&quot;groupId&quot;: &quot;25303224612738888&quot;\n\t},\n\t&quot;remoteKey&quot;: &quot;/127.0.0.1:8070&quot;\n}\n\n</code></pre>\n<p>响应包</p>\n<pre><code>{\n\t&quot;key&quot;: &quot;25303248287617950&quot;,\n\t&quot;msg&quot;: {\n\t\t&quot;action&quot;: &quot;joinGroup&quot;,\n\t\t&quot;state&quot;: 200,\n\t\t&quot;groupId&quot;: &quot;25303224612738888&quot;\n\t},\n\t&quot;remoteKey&quot;: &quot;/127.0.0.1:59413&quot;\n}\n\n</code></pre>\n<ol>\n<li>创建事务组指令</li>\n</ol>\n<p>请求方向:TxClient-&gt;TxManager</p>\n<p>请求msg对象参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">createGroup</td>\n<td style=\"text-align:center\">创建事务组key</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">100</td>\n<td style=\"text-align:center\">请求状态</td>\n</tr>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n</tbody>\n</table>\n<p>响应参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">createGroup</td>\n<td style=\"text-align:center\">创建事务组</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">200</td>\n<td style=\"text-align:center\">响应成功</td>\n</tr>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n</tbody>\n</table>\n<ol start=\"2\">\n<li>加入事务组指令</li>\n</ol>\n<p>请求方向:TxClient-&gt;TxManager</p>\n<p>请求msg对象参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">joinGroup</td>\n<td style=\"text-align:center\">加入事务组</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">100</td>\n<td style=\"text-align:center\">请求状态</td>\n</tr>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n<tr>\n<td>bytes</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">1234567890==</td>\n<td style=\"text-align:center\">序列化请求数据包</td>\n</tr>\n</tbody>\n</table>\n<p>序列化数据包内容格式</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n<tr>\n<td>unitId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务单元Id</td>\n</tr>\n<tr>\n<td>unitType</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">lcn</td>\n<td style=\"text-align:center\">事务类型(lcn/txc/tcc)</td>\n</tr>\n<tr>\n<td>remoteKey</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">/127.0.0.1:8070</td>\n<td style=\"text-align:center\">请求资源方标示key</td>\n</tr>\n</tbody>\n</table>\n<p>响应参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">joinGroup</td>\n<td style=\"text-align:center\">加入事务组</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">200</td>\n<td style=\"text-align:center\">响应成功</td>\n</tr>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n</tbody>\n</table>\n<ol start=\"3\">\n<li>通知事务组指令</li>\n</ol>\n<p>请求方向:TxClient-&gt;TxManager</p>\n<p>请求msg对象参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">notifyGroup</td>\n<td style=\"text-align:center\">通知事务组</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">100</td>\n<td style=\"text-align:center\">请求状态</td>\n</tr>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n<tr>\n<td>bytes</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">1234567890==</td>\n<td style=\"text-align:center\">序列化请求数据包</td>\n</tr>\n</tbody>\n</table>\n<p>序列化数据包内容格式</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">0 或 1</td>\n<td style=\"text-align:center\">代表发起方正常或者异常执行</td>\n</tr>\n</tbody>\n</table>\n<p>响应参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">notifyGroup</td>\n<td style=\"text-align:center\">通知事务组</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">200</td>\n<td style=\"text-align:center\">响应成功</td>\n</tr>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n</tbody>\n</table>\n<ol start=\"4\">\n<li>通知事务单元指令</li>\n</ol>\n<p>请求方向:TxManager-&gt;TxClient</p>\n<p>请求msg对象参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">notifyUnit</td>\n<td style=\"text-align:center\">通知事务单元</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">100</td>\n<td style=\"text-align:center\">请求状态</td>\n</tr>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n<tr>\n<td>bytes</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">1234567890==</td>\n<td style=\"text-align:center\">序列化请求数据包</td>\n</tr>\n</tbody>\n</table>\n<p>序列化数据包内容格式</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n<tr>\n<td>unitId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务单元Id</td>\n</tr>\n<tr>\n<td>unitType</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">lcn</td>\n<td style=\"text-align:center\">事务类型(lcn/txc/tcc)</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">0 或 1</td>\n<td style=\"text-align:center\">0 代表回滚，1代表提交</td>\n</tr>\n</tbody>\n</table>\n<p>响应参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">notifyUnit</td>\n<td style=\"text-align:center\">通知事务组</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">200</td>\n<td style=\"text-align:center\">响应成功</td>\n</tr>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n</tbody>\n</table>\n<ol start=\"5\">\n<li>事务单元检查事务状态</li>\n</ol>\n<p>请求方向:TxClient-&gt;TxManager</p>\n<p>请求msg对象参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">askTransactionState</td>\n<td style=\"text-align:center\">通知事务组</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">100</td>\n<td style=\"text-align:center\">请求状态</td>\n</tr>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n<tr>\n<td>bytes</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">1234567890==</td>\n<td style=\"text-align:center\">序列化请求数据包</td>\n</tr>\n</tbody>\n</table>\n<p>序列化数据包内容格式</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n<tr>\n<td>unitId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务单元Id</td>\n</tr>\n</tbody>\n</table>\n<p>响应参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">askTransactionState</td>\n<td style=\"text-align:center\">通知事务组</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">200</td>\n<td style=\"text-align:center\">响应成功</td>\n</tr>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n<tr>\n<td>bytes</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">1234567890==</td>\n<td style=\"text-align:center\">序列化请求数据包</td>\n</tr>\n</tbody>\n</table>\n<p>序列化数据包内容格式(该序列化直接对Short对象做了序列化，无Object对象)</p>\n<table>\n<thead>\n<tr>\n<th>数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>int</td>\n<td style=\"text-align:center\">1、0、-1</td>\n<td style=\"text-align:center\">0 代表回滚，1代表提交，-1将添加到异常状态</td>\n</tr>\n</tbody>\n</table>\n<ol start=\"6\">\n<li>心跳指令</li>\n</ol>\n<p>请求方向:TxManager-&gt;TxClient</p>\n<p>格式如下:</p>\n<pre><code>{&quot;key&quot;:&quot;252356025399579923&quot;,&quot;msg&quot;:{&quot;action&quot;:&quot;h&quot;,&quot;state&quot;:1000}}\n</code></pre>\n<ol start=\"7\">\n<li>通知加入新的TxManager</li>\n</ol>\n<p>请求方向:TxManager-&gt;TxClient</p>\n<p>请求msg对象参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">newTxManager</td>\n<td style=\"text-align:center\">通知事务组</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">100</td>\n<td style=\"text-align:center\">请求状态</td>\n</tr>\n<tr>\n<td>bytes</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">1234567890==</td>\n<td style=\"text-align:center\">序列化请求数据包</td>\n</tr>\n</tbody>\n</table>\n<p>序列化数据包内容格式</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>host</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">127.0.0.1</td>\n<td style=\"text-align:center\">TxManager服务地址</td>\n</tr>\n<tr>\n<td>port</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">8082</td>\n<td style=\"text-align:center\">TxManager服务端口</td>\n</tr>\n</tbody>\n</table>\n<p>无需响应</p>\n<ol start=\"8\">\n<li>客户端上报异常状态</li>\n</ol>\n<p>请求方向:TxClient-&gt;TxManager</p>\n<p>请求msg对象参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">writeException</td>\n<td style=\"text-align:center\">通知事务组</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">100</td>\n<td style=\"text-align:center\">请求状态</td>\n</tr>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n<tr>\n<td>bytes</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">1234567890==</td>\n<td style=\"text-align:center\">序列化请求数据包</td>\n</tr>\n</tbody>\n</table>\n<p>序列化数据包内容格式</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n<tr>\n<td>unitId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务单元Id</td>\n</tr>\n<tr>\n<td>registrar</td>\n<td style=\"text-align:center\">short</td>\n<td style=\"text-align:center\">-1 0 1 2</td>\n<td style=\"text-align:center\">异常情况 -1:未知, 0:TxManager通知事务,1:TxClient查询事务状态, 2:事务发起方通知事务组</td>\n</tr>\n<tr>\n<td>transactionState</td>\n<td style=\"text-align:center\">short</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务单元Id</td>\n</tr>\n</tbody>\n</table>\n<p>无需响应</p>\n<ol start=\"9\">\n<li>通知客户端获取事务切面日志</li>\n</ol>\n<p>请求方向:TxManager-&gt;TxClient</p>\n<p>请求msg对象参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">getAspectLog</td>\n<td style=\"text-align:center\">通知事务组</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">100</td>\n<td style=\"text-align:center\">请求状态</td>\n</tr>\n<tr>\n<td>bytes</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">1234567890==</td>\n<td style=\"text-align:center\">序列化请求数据包</td>\n</tr>\n</tbody>\n</table>\n<p>序列化数据包内容格式</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n<tr>\n<td>unitId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务单元Id</td>\n</tr>\n</tbody>\n</table>\n<p>响应参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">getAspectLog</td>\n<td style=\"text-align:center\">通知事务组</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">200</td>\n<td style=\"text-align:center\">响应成功</td>\n</tr>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n<tr>\n<td>bytes</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">1234567890==</td>\n<td style=\"text-align:center\">序列化请求数据包</td>\n</tr>\n</tbody>\n</table>\n<p>序列化数据包内容格式(该序列化直接对Json对象做了序列化，无Object对象)</p>\n<table>\n<thead>\n<tr>\n<th>数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>JsonObject</td>\n<td style=\"text-align:center\">{key:value}</td>\n<td style=\"text-align:center\">切面日志json格式</td>\n</tr>\n</tbody>\n</table>\n<ol start=\"10\">\n<li>客户端初始化指令</li>\n</ol>\n<p>请求方向:TxClient-&gt;TxManager</p>\n<p>请求msg对象参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">initClient</td>\n<td style=\"text-align:center\">通知事务单元</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">100</td>\n<td style=\"text-align:center\">请求状态</td>\n</tr>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n<tr>\n<td>bytes</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">1234567890==</td>\n<td style=\"text-align:center\">序列化请求数据包</td>\n</tr>\n</tbody>\n</table>\n<p>序列化数据包内容格式</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>appName</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">demo1</td>\n<td style=\"text-align:center\">模块名称</td>\n</tr>\n</tbody>\n</table>\n<p>响应参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">initClient</td>\n<td style=\"text-align:center\">通知事务组</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">200</td>\n<td style=\"text-align:center\">响应成功</td>\n</tr>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n<tr>\n<td>bytes</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">1234567890==</td>\n<td style=\"text-align:center\">序列化请求数据包</td>\n</tr>\n</tbody>\n</table>\n<p>序列化数据包内容格式</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>appName</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">demo1</td>\n<td style=\"text-align:center\">模块名称</td>\n</tr>\n<tr>\n<td>dtxTime</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">30000</td>\n<td style=\"text-align:center\">分布式事务执行最大时间(单位:毫秒)</td>\n</tr>\n<tr>\n<td>tmRpcTimeout</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">30000</td>\n<td style=\"text-align:center\">TM RPC 超时时间(单位:毫秒)</td>\n</tr>\n<tr>\n<td>seqLen</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">12</td>\n<td style=\"text-align:center\">雪花算法ID序列长度</td>\n</tr>\n<tr>\n<td>分配的机器ID</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">雪花算法分配的机器ID</td>\n</tr>\n</tbody>\n</table>\n<ol start=\"11\">\n<li>TXC询问分布式锁</li>\n</ol>\n<p>请求方向:TxClient-&gt;TxManager</p>\n<p>请求msg对象参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">qdtxl</td>\n<td style=\"text-align:center\">询问分布式锁</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">100</td>\n<td style=\"text-align:center\">请求状态</td>\n</tr>\n<tr>\n<td>bytes</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">1234567890==</td>\n<td style=\"text-align:center\">序列化请求数据包</td>\n</tr>\n</tbody>\n</table>\n<p>序列化数据包内容格式</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>groupId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">事务组Id</td>\n</tr>\n<tr>\n<td>contextId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">应用模块位于标识</td>\n</tr>\n<tr>\n<td>locks</td>\n<td style=\"text-align:center\">Set<String></td>\n<td style=\"text-align:center\">{&quot;123&quot;,&quot;456&quot;}</td>\n<td style=\"text-align:center\">锁的数据内容</td>\n</tr>\n<tr>\n<td>lockType</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">共享锁:2,排他锁:1</td>\n</tr>\n</tbody>\n</table>\n<p>响应参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">initClient</td>\n<td style=\"text-align:center\">通知事务组</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">200</td>\n<td style=\"text-align:center\">响应成功</td>\n</tr>\n<tr>\n<td>bytes</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">1234567890==</td>\n<td style=\"text-align:center\">序列化请求数据包</td>\n</tr>\n</tbody>\n</table>\n<p>序列化数据包内容格式为boolean类型，false | true</p>\n<ol start=\"12\">\n<li>TXC释放分布式锁</li>\n</ol>\n<p>请求方向:TxClient-&gt;TxManager</p>\n<p>请求msg对象参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">rdtxl</td>\n<td style=\"text-align:center\">释放分布式锁</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">100</td>\n<td style=\"text-align:center\">请求状态</td>\n</tr>\n<tr>\n<td>bytes</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">1234567890==</td>\n<td style=\"text-align:center\">序列化请求数据包</td>\n</tr>\n</tbody>\n</table>\n<p>序列化数据包内容格式</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>contextId</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">1234567890</td>\n<td style=\"text-align:center\">应用模块位于标识</td>\n</tr>\n<tr>\n<td>locks</td>\n<td style=\"text-align:center\">Set<String></td>\n<td style=\"text-align:center\">{&quot;123&quot;,&quot;456&quot;}</td>\n<td style=\"text-align:center\">锁的数据内容</td>\n</tr>\n</tbody>\n</table>\n<p>响应参数:</p>\n<table>\n<thead>\n<tr>\n<th>字段</th>\n<th style=\"text-align:center\">数据类型</th>\n<th style=\"text-align:center\">值</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>action</td>\n<td style=\"text-align:center\">string</td>\n<td style=\"text-align:center\">initClient</td>\n<td style=\"text-align:center\">通知事务组</td>\n</tr>\n<tr>\n<td>state</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">200</td>\n<td style=\"text-align:center\">响应成功</td>\n</tr>\n<tr>\n<td>bytes</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">1234567890==</td>\n<td style=\"text-align:center\">序列化请求数据包</td>\n</tr>\n</tbody>\n</table>\n<p>序列化数据包内容格式为boolean类型，false | true</p>\n",
  "link": "\\en-us\\docs\\communication.html",
  "meta": {}
}