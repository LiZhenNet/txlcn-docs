{
  "filename": "manager.md",
  "__html": "<h1>TxManager配置说明</h1>\n<h2>application.properties</h2>\n<pre><code class=\"language-properties\">\n<span class=\"hljs-meta\">spring.application.name</span>=<span class=\"hljs-string\">tx-manager</span>\n<span class=\"hljs-meta\">server.port</span>=<span class=\"hljs-string\">7970</span>\n<span class=\"hljs-comment\">\n#mysql 配置</span>\n<span class=\"hljs-meta\">spring.datasource.driver-class-name</span>=<span class=\"hljs-string\">com.mysql.jdbc.Driver</span>\n<span class=\"hljs-meta\">spring.datasource.url</span>=<span class=\"hljs-string\">jdbc:mysql://127.0.0.1:3306/tx-manager?characterEncoding=UTF-8</span>\n<span class=\"hljs-meta\">spring.datasource.username</span>=<span class=\"hljs-string\">root</span>\n<span class=\"hljs-meta\">spring.datasource.password</span>=<span class=\"hljs-string\">root</span>\n        \n<span class=\"hljs-meta\">mybatis.configuration.map-underscore-to-camel-case</span>=<span class=\"hljs-string\">true</span>\n<span class=\"hljs-meta\">mybatis.configuration.use-generated-keys</span>=<span class=\"hljs-string\">true</span>\n<span class=\"hljs-comment\">\n\n# TxManager Host Ip 默认为 127.0.0.1</span>\n<span class=\"hljs-meta\">tx-lcn.manager.host</span>=<span class=\"hljs-string\">127.0.0.1</span>\n<span class=\"hljs-comment\"># TxClient连接请求端口 默认为 8070</span>\n<span class=\"hljs-meta\">tx-lcn.manager.port</span>=<span class=\"hljs-string\">8070</span>\n<span class=\"hljs-comment\"># 心跳检测时间(ms) 默认为 300000</span>\n<span class=\"hljs-meta\">tx-lcn.manager.heart-time</span>=<span class=\"hljs-string\">300000</span>\n<span class=\"hljs-comment\"># 分布式事务执行总时间(ms) 默认为36000</span>\n<span class=\"hljs-meta\">tx-lcn.manager.dtx-time</span>=<span class=\"hljs-string\">36000</span>\n<span class=\"hljs-comment\">#参数延迟删除时间单位ms  默认为dtx-time值</span>\n<span class=\"hljs-meta\">tx-lcn.message.netty.attr-delay-time</span>=<span class=\"hljs-string\">36000</span>\n<span class=\"hljs-comment\">#事务处理并发等级 默认为128</span>\n<span class=\"hljs-meta\">tx-lcn.manager.concurrent-level</span>=<span class=\"hljs-string\">128</span>\n<span class=\"hljs-comment\">\n#后台登陆密码，默认值为codingapi</span>\n<span class=\"hljs-meta\">tx-lcn.manager.admin-key</span>=<span class=\"hljs-string\">codingapi</span>\n<span class=\"hljs-comment\">#分布式事务锁超时时间 默认为-1，当-1时会用tx-lcn.manager.dtx-time的时间</span>\n<span class=\"hljs-meta\">tx-lcn.manager.dtx-lock-time</span>=<span class=\"hljs-string\">-1</span>\n<span class=\"hljs-comment\">#雪花算法的sequence位长度，默认为12位.</span>\n<span class=\"hljs-meta\">tx-lcn.manager.seq-len</span>=<span class=\"hljs-string\">12</span>\n<span class=\"hljs-comment\">#异常回调开关</span>\n<span class=\"hljs-meta\">tx-lcn.manager.ex-url-enabled</span>=<span class=\"hljs-string\">false</span>\n<span class=\"hljs-comment\"># 事务异常通知（任何http协议地址。未指定协议时，为TxManager提供的接口）</span>\n<span class=\"hljs-meta\">tx-lcn.manager.ex-url</span>=<span class=\"hljs-string\">/provider/email-to/***@**.com</span>\n<span class=\"hljs-comment\">\n\n\n# 开启日志,默认为false</span>\n<span class=\"hljs-meta\">tx-lcn.logger.enabled</span>=<span class=\"hljs-string\">true</span>\n<span class=\"hljs-meta\">logging.level.com.codingapi</span>=<span class=\"hljs-string\">debug</span>\n<span class=\"hljs-comment\">#redis 的设置信息</span>\n<span class=\"hljs-meta\">spring.redis.host</span>=<span class=\"hljs-string\">127.0.0.1</span>\n<span class=\"hljs-meta\">spring.redis.port</span>=<span class=\"hljs-string\">6379</span>\n<span class=\"hljs-meta\">spring.redis.password</span>=<span class=\"hljs-string\"></span>\n\n\n</code></pre>\n<hr>\n<p><code>注意（NOTE）</code></p>\n<p>(1) TxManager所有配置均有默认配置，请按需覆盖默认配置。</p>\n<p>(2) <em>特别注意</em> TxManager进程会监听两个端口号，一个为<code>TxManager端口</code>，另一个是<code>事务消息端口</code>。TxClient默认连接<code>事务消息端口</code>是<code>8070</code>，\n所以，为保证TX-LCN基于默认配置运行良好，请设置<code>TxManager端口</code>号为<code>8069</code> 或者指定<code>事务消息端口</code>为<code>8070</code></p>\n<p>(3) <code>分布式事务执行总时间 a</code> 与 <code>TxClient通讯最大等待时间 b</code>、<code>TxManager通讯最大等待时间 c</code>、<code>微服务间通讯时间 d</code>、<code>微服务调用链长度 e</code> 几个时间存在着依赖关系。\n<code>a &gt;= 2c + (b + c + d) * (e - 1)</code>, 特别地，b、c、d 一致时，<code>a &gt;= (3e-1)b</code>。你也可以在此理论上适当在减小a的值，发生异常时能更快得到自动补偿，即 <code>a &gt;= (3e-1)b - Δ</code>（<a href=\"../fqa.html\">原因</a>）。\n最后，调用链小于等于3时，将基于默认配置运行良好</p>\n<p>(4) 若用<code>tx-lcn.manager.ex-url=/provider/email-to/xxx@xx.xxx</code> 这个配置，配置管理员邮箱信息(如QQ邮箱)：</p>\n<pre><code class=\"language-properties\"><span class=\"hljs-meta\">spring.mail.host</span>=<span class=\"hljs-string\">smtp.qq.com</span>\n<span class=\"hljs-meta\">spring.mail.port</span>=<span class=\"hljs-string\">587</span>\n<span class=\"hljs-meta\">spring.mail.username</span>=<span class=\"hljs-string\">xxxxx@**.com</span>\n<span class=\"hljs-meta\">spring.mail.password</span>=<span class=\"hljs-string\">*********</span>\n</code></pre>\n<hr>\n",
  "link": "\\en-us\\docs\\setting\\manager.html",
  "meta": {}
}